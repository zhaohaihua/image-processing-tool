<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>图片处理工具</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <header class="navbar">
            <div class="navbar-brand">
                <h1>图片处理工具</h1>
            </div>
            <div class="navbar-center"></div>
            <div class="navbar-actions">
                <div class="navbar-buttons">
                    <button id="select-bg-btn" class="btn btn-primary">
                        <span class="btn-icon">📷</span>
                        选择背景图
                    </button>
                    <input type="file" id="base-image" accept="image/*" class="hidden-file-input">
                    
                    <button id="select-img-btn" class="btn btn-primary">
                        <span class="btn-icon">📷</span>
                        选择图片
                    </button>
                    <input type="file" id="adjust-image" accept="image/*" class="hidden-file-input">
                    
                    <button id="save-btn" class="btn btn-success">
                        <span class="btn-icon">💾</span>
                        保存结果
                    </button>
                </div>
            </div>
        </header>
        
        <div class="main-content">
            <aside class="sidebar">
                <div class="sidebar-section">
                    <h3>透明度控制</h3>
                    <div class="control-group">
                        <label for="opacity-slider">透明度</label>
                        <input type="range" id="opacity-slider" min="0" max="100" value="70" class="slider">
                        <span id="opacity-value">70%</span>
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <h3>辅助线设置</h3>
                    <div class="control-group">
                        <label for="horizontal-lines">水平线数量</label>
                        <input type="number" id="horizontal-lines" value="3" min="0" max="20" class="number-input">
                    </div>
                    <div class="control-group">
                        <label for="vertical-lines">垂直线数量</label>
                        <input type="number" id="vertical-lines" value="3" min="0" max="20" class="number-input">
                    </div>
                    <div class="control-group">
                        <label for="line-color">线条颜色</label>
                        <input type="color" id="line-color" value="#ff0000" class="color-input">
                    </div>
                    <div class="control-group">
                        <label for="line-opacity">线条透明度</label>
                        <input type="range" id="line-opacity" min="10" max="100" value="50" class="slider">
                        <span id="line-opacity-value">50%</span>
                    </div>
                    <button id="apply-guidelines-btn" class="btn btn-secondary">应用辅助线</button>
                    <button id="clear-guidelines-btn" class="btn btn-danger">清除辅助线</button>
                </div>
                
                <div class="sidebar-section">
                    <h3>畸变矫正</h3>
                    <div class="distortion-controls">
                        <button id="apply-distortion-btn" class="btn btn-primary">
                            <span class="btn-icon">✓</span>
                            四点矫正
                        </button>
                        <button id="reset-distortion-btn" class="btn btn-secondary">
                            <span class="btn-icon">↺</span>
                            重置控制点
                        </button>
                    </div>
                    <div class="distortion-points-info">
                        <p class="info-text">使用鼠标点击或键盘方向键选择控制点，使用方向键或鼠标拖动调整位置</p>
                    </div>
                    <div class="distortion-points-container">
                        <div class="distortion-point" id="point-tl" data-corner="tl" tabindex="0">
                            <span class="point-label">左上</span>
                        </div>
                        <div class="distortion-point" id="point-tr" data-corner="tr" tabindex="0">
                            <span class="point-label">右上</span>
                        </div>
                        <div class="distortion-point" id="point-bl" data-corner="bl" tabindex="0">
                            <span class="point-label">左下</span>
                        </div>
                        <div class="distortion-point" id="point-br" data-corner="br" tabindex="0">
                            <span class="point-label">右下</span>
                        </div>
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <h3>图片操作</h3>
                    <div class="operation-buttons">
                        <button id="correct-btn" class="btn btn-warning">
                            <span class="btn-icon">↻</span>
                            矫正图片
                        </button>
                        <button id="crop-btn" class="btn btn-warning">
                            <span class="btn-icon">✂</span>
                            裁剪图片
                        </button>
                        <button id="reset-btn" class="btn btn-danger">
                            <span class="btn-icon">↺</span>
                            重置
                        </button>
                    </div>
                </div>
            </aside>
            
            <main class="workspace">
                <div class="canvas-container">
                    <div id="image-wrapper" class="image-wrapper">
                        <img id="base-img" class="base-image" src="" alt="固定底图">
                        <img id="adjust-img" class="adjustable-image" src="" alt="处理图片">
                        <div id="guidelines-container" class="guidelines-container"></div>
                    </div>
                    <div class="zoom-controls">
                        <button id="zoom-in-btn" class="zoom-btn" title="放大">
                            <span class="zoom-icon">+</span>
                        </button>
                        <button id="zoom-out-btn" class="zoom-btn" title="缩小">
                            <span class="zoom-icon">−</span>
                        </button>
                        <button id="zoom-reset-btn" class="zoom-btn" title="重置缩放">
                            <span class="zoom-icon">⟲</span>
                        </button>
                    </div>
                </div>
            </main>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>